# shopping-cart

## class App

```php

<?php
class App {

    private $result = NULL;

    public function __construct(){
        // Запускаем сессию
        Session::init();
    }
```


## Автозагрузка классов

- автозагрузчик — функция или метод, реализующие логику автоматического поиска и загрузки скрипта с объявлением класса по его имени;
- стек автозагрузки — массив, используемый системой, для хранения всех автозагрузчиков в порядке их добавления;
- SPL — стандартная библиотека PHP http://www.php.net/manual/en/book.spl.php.



## Функция __autoload()

Стандартная функция __autoload() появилась предназначена для автоматической загрузки скриптов с объявлениями классов, вместо бесконечных инструкций require(). 

Несмотря на преимущества, предоставляемые этой функцией, она имеет ряд существенных недостатков:

- для регистрации нескольких автозагрузчиков необходимо весь код помещать в тело единственной функции;
- нет возможности динамически активировать/деактивировать автозагрузчики.


## __autoload

```

void __autoload ( string $class )
```

- class - Имя загружаемого класса

Эта функция не возвращает значения после выполнения.

## SPL-функции

SPL-функции для автоматической загрузки классов:
- spl_autoload_call — принудительно загружает класс по его имени, используя все доступные в системе автозагрузчики;
- spl_autoload_extensions — возвращает/модифицирует расширения файлов, из которых происходит загрузка неинициализированных классов;
- spl_autoload_functions — возвращает список всех зарегистрированных автозагрузчиков в системе;
- spl_autoload_register — регистрация собственного автозагрузчика в стеке автозагрузки;
- spl_autoload_unregister — удаление автозагрузчика из стека автозагрузки;
- spl_autoload — основная функция автоматической загрузки классов,  вызывается при обращении к классу, который еще не инициализирован. 

## Автозагрузка классов

Функция spl_autoload_register() позволяет зарегистрировать необходимое количество автозагрузчиков, для автоматической загрузки ранее не определенных классов и интерфейсов. 

Вызов этой функции позволяет загрузить класс прежде, чем интерпретатор закончит выполнение скрипта с ошибкой.
spl_autoload_register() предоставляет гораздо более гибкую альтернативу, позволяя регистрировать необходимое количество автозагрузчиков, например для корректной работы сторонних библиотек. 
В связи с этим, использование __autoload() не рекомендуется и она может быть объявлена устаревшей в будущем.

## spl_autoload_register
```
bool spl_autoload_register ([ callable $autoload_function [, bool $throw = true [, bool $prepend = false ]]] )
```
Регистрирует функцию в spl очереди метода __autoload. В результате очередь будет активирована, даже если ранее она был выключена.

Если в вашем скрипте реализована функция __autoload(), ее необходимо явно зарегистрировать в очереди __autoload. Это необходимо, так как spl_autoload_register() полностью заменяет механизм кэширования __autoload() функциями spl_autoload() и spl_autoload_call().

spl_autoload_register() позволяет задать несколько реализаций метода автозагрузки описаний классов и интерфейсов. 
Она создает очередь из функций автозагрузки в порядке их определения в скрипте, тогда как встроенная функция __autoload() может иметь только одну реализацию.


## Подключаем файлы ядра

```php
// подключаем файлы ядра

function autoloadsystem($class) {
    $filename = ROOT . "/core/" . $class . ".php";
    if(file_exists($filename)){
       require $filename;
    }
```
## Подключаем модели


```php
    $filename = ROOT . "/models/" . $class . ".php";
    if(file_exists($filename)){
       require $filename;
    }
 }
```
## Регистрируем автозагрузчик

```php
require_once realpath(__DIR__).'/../config/app.php';

require_once realpath(__DIR__).'/./autoload.php';

// Регистрируем автозагрузчик
spl_autoload_register("autoloadsystem");

$app = new App();
$app->init();
```
